;
; PJSIP Configuration for AI Call Center
; /etc/asterisk/pjsip.conf
;

[global]
type=global
max_forwards=70
user_agent=Asterisk AI Call Center
default_outbound_endpoint=default_outbound

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
external_media_address=YOUR_PUBLIC_IP
external_signaling_address=YOUR_PUBLIC_IP
local_net=192.168.0.0/16
local_net=172.16.0.0/12
local_net=10.0.0.0/8

[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0:5060

[transport-ws]
type=transport
protocol=ws
bind=0.0.0.0:8089

; Internal Test Extensions Template
[auth-userpass](!)
type=auth
auth_type=userpass

[aor-single-reg](!)
type=aor
max_contacts=1
remove_existing=yes

[endpoint-basic](!)
type=endpoint
context=internal
disallow=all
allow=ulaw
allow=alaw
allow=gsm
allow=g722
allow=opus
direct_media=no
ice_support=yes
rtp_symmetric=yes
rewrite_contact=yes
force_rport=yes

; Test Extension 1000 (for testing calls)
[1000]
type=endpoint
context=internal
disallow=all
allow=ulaw
allow=alaw
allow=g722
allow=opus
aors=1000
auth=1000
direct_media=no
callerid="Test User 1000" <1000>

[1000]
type=auth
auth_type=userpass
password=test1000
username=1000

[1000]
type=aor
max_contacts=1
remove_existing=yes

; Test Extension 1001 (for testing calls)
[1001]
type=endpoint
context=internal
disallow=all
allow=ulaw
allow=alaw
allow=g722
allow=opus
aors=1001
auth=1001
direct_media=no
callerid="Test User 1001" <1001>

[1001]
type=auth
auth_type=userpass
password=test1001
username=1001

[1001]
type=aor
max_contacts=1
remove_existing=yes

; AI Agent Extension (receives incoming calls)
[ai_agent]
type=endpoint
context=ai_handler
disallow=all
allow=ulaw
allow=alaw
allow=g722
allow=opus
aors=ai_agent
auth=ai_agent
direct_media=no
callerid="AI Investment Advisor" <9000>

[ai_agent]
type=auth
auth_type=userpass
password=ai_agent_pass
username=ai_agent

[ai_agent]
type=aor
max_contacts=5
remove_existing=yes
